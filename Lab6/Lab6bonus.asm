ORG 0000H
AJMP START
ORG 0050H
;同時按兩個按鈕來顯示16~20
TABLE:
	DB 11000000B ;0
	DB 11111001B ;1
	DB 10100100B ;2
	DB 10110000B ;3
	DB 10011001B ;4
	DB 10010010B ;5
	DB 10000010B ;6
	DB 11111000B ;7
	DB 10000000B ;8
	DB 10011000B ;9

START:
	MOV DPTR, #TABLE
	MOV P3, #00H
	MOV P0, #0FFH
SIXTEEN:
	MOV P1, #0EFH
	ACALL DELAY
	MOV A, P1
	CJNE A, #0ECH, SEVENTEEN
	MOV R3, P1
	MOV A, #16
	AJMP OUTPUT1
SEVENTEEN:
	MOV P1, #0EFH
	ACALL DELAY
	MOV A, P1
	CJNE A, #0E9H, EIGHTEEN
	MOV R3, P1
	MOV A, #17
	AJMP OUTPUT1
EIGHTEEN:
	MOV P1, #0EFH
	ACALL DELAY
	MOV A, P1
	CJNE A, #0E3H, NINETEEN
	MOV R3, P1
	MOV A, #18
	AJMP OUTPUT1
NINETEEN:
	MOV P1, #0EFH
	ACALL DELAY
	MOV A, P1
	CJNE A, #0E6H, TWENTY
	MOV R3, P1
	MOV A, #19
	AJMP OUTPUT1
TWENTY:
	MOV P1, #0EFH
	ACALL DELAY
	MOV A, P1
	CJNE A, #0EAH, ROW1
	MOV R3, P1
	MOV A, #20
	AJMP OUTPUT1
ROW1:
	MOV R3, P1
	MOV P1, #7FH
	MOV R3, P1
	CALL DELAY
	MOV A, P1
	ANL A, #0FH
	MOV R1, #0
	CJNE A, #0FH, COL1
ROW2:
	MOV P1, #0BFH
	MOV R3, P1
	CALL DELAY
	MOV A, P1
	ANL A, #0FH
	MOV R1, #4
	CJNE A, #0FH, COL1
ROW3:
	MOV P1, #0DFH
	MOV R3, P1
	CALL DELAY
	MOV A, P1
	ANL A, #0FH
	MOV R1, #8
	CJNE A, #0FH, COL1
ROW4:
	MOV P1, #0EFH
	MOV R3, P1
	CALL DELAY
	MOV A, P1
	ANL A, #0FH
	MOV R1, #12
	CJNE A, #0FH, COL1
	AJMP ROW1
COL1:
	CJNE A, #0EH, COL2
	MOV R0, #0
	JMP OUTPUT
COL2:
	CJNE A, #0DH, COL3
	MOV R0, #1
	JMP OUTPUT
COL3:
	CJNE A, #0BH, COL4
	MOV R0, #2
	JMP OUTPUT
COL4:
	CJNE A, #07H, ROW1
	MOV R0, #3
	JMP OUTPUT
OUTPUT:
	MOV A, R0
	ADD A, R1	
OUTPUT1:	
	MOV B, #10
	DIV AB
OUTPUT2:
	MOV R5, A
	MOVC A, @A+DPTR
	MOV P0, A
	MOV P3, #0FDH
	ACALL DELAY
	MOV P3, #0FFH

	MOV A, B
	MOVC A, @A+DPTR
	MOV P0, A
	MOV P3, #0FEH
	ACALL DELAY
	
	MOV A, P1
	CJNE A, 3, TEMP
	MOV A, R5
	AJMP OUTPUT2
TEMP:
    LJMP START
DELAY:
	MOV R6, #100
DELAY1:
	MOV R7, #200
DELAY2:
	DJNZ R7, DELAY2
	DJNZ R6, DELAY1
	RET
	END
